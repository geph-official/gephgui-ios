<!DOCTYPE html>

<html>
    <meta name="viewport" content="width=device-width" />
        <script>
            function handleInfoFromApp( fromApp ){
                document.getElementById("valToWrite").innerHTML = fromApp;
            }
            function handleError( err ){
            
            }
        </script>

    <h1 id="valToWrite">Hello</h1>
    <button onclick="callLabooyah( 'Labooyah!', handleInfoFromApp, handleError )">Load Info from App</button>
    
</html>

<script>
    function callLabooyah( inputInfo, successFunc, errorFunc ) {
        
        var promise = window.webkit.messageHandlers.labooyah.postMessage( inputInfo );
        
        promise.then(
          function(result) {
            console.log(result); // "Stuff worked!"
            successFunc( result )
          },
          function(err) {
            console.log(err); // Error: "It broke"
            errorFunc( err )
          });
    }
</script>

